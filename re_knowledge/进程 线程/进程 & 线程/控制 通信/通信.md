<div style="float: left; width: 64%; padding: 1%;">

## 进程的通信

<ul>

进程通信是指进程之间的信息交换。PV操作（见2.3节）是低级通信方式，高级通信方式是指以较高的效率传输大量数据的通信方式。高级通信方法主要有以下三类。

### 共享存储

<ul>

#### 基本概念
- 通信进程之间存在可直接访问的共享空间
- 通过对共享空间进行写/读操作实现信息交换
- 需使用同步互斥工具控制写/读操作

#### 共享方式分类
- 低级方式：基于数据结构的共享
- 高级方式：基于存储区的共享

#### 系统职责
- 提供可共享使用的存储空间
- 提供同步互斥工具
- 数据交换由用户自行安排读/写指令完成

#### 注意事项
- 进程空间通常独立
- 需通过特殊系统调用实现共享空间
- 进程内线程自然共享进程空间

#### 简单类比
- 类似甲乙通过大布袋交换物品
- 不能直接在双方手中交换物品

</ul>

### 消息传递

<ul>

#### 基本特征
- 适用于无直接共享空间的进程通信
- 以格式化消息为数据交换单位
- 通过发送和接收两个原语实现

#### 应用优势
- 隐藏通信实现细节
- 对用户透明
- 简化通信程序设计
- 应用广泛，特别适用于：
  - 微内核操作系统
  - 多CPU系统
  - 分布式系统
  - 计算机网络

#### 通信方式

<ul>

##### 直接通信
- 发送进程直接将消息发送给接收进程
- 消息挂在接收进程的缓冲队列上
- 接收进程从队列中获取消息

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/4e378c14db3ecaf63a9189b82896c975963663cfed48df20335663062fd6dff2.jpg)

##### 简单类比
- 类似邮递员送信
  - 直接通信：直接送到收件人手中
  - 间接通信：放入收件人邮箱

</ul>

</ul>

### 管道通信

<ul>

> pro：管道通信的特点（2014）

#### 基本概念
- 特殊的共享文件(pipe文件)
- 数据先进先出
- 支持生产者-消费者方式通信

#### 协调能力
- 互斥：进程读/写操作互斥
- 同步：读写进程间的同步机制
- 确定对方存在

![](https://cdn-mineru.openxlab.org.cn/model-mineru/prod/0aa0d9d676a835dc9a42cff1fc91636ab53c2ace9cbc0f3c38960a43f226917a.jpg)  
图2.4管道通信

#### Linux中的管道特性

<ul>

##### 缓冲区管理
- 固定大小(4KB)缓冲区
- 写满时阻塞等待读取
- 读空时阻塞等待写入

##### 访问限制
- 仅创建进程可访问
- 子进程继承父进程管道
- 可用于父子进程通信

</ul>

> attention：

#### 重要说明
- 读取为一次性操作
- 读取后立即释放空间
- 普通管道仅支持单向通信
- 双向通信需要两个管道

</ul>

</ul>

</div>
<div style="float: right; width: 26%; padding: 1%;">

</div>
<div style="clear: both;"></div>