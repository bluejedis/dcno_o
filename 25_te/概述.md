# 概述
##..
### concept：

- 最基本特征
    - 并 共
- 并发：同一 时间间隔(use time same

---
- 命令接口&==程序==..（system调用
    - 命令：脱机、联..
    - ..调用：请求system服务 ← 见"程序"
 ，则select
---
- 单cpu
    - 进程 can't并行
- 多处理器 can

### 发展历程
- 基本类型：
    - 批 分 实
        - 批
            - 无交互_（main缺点）_ ；不封闭 不顺序
            - need中断
                - make 程序(io设备etc)与cpu并行
                    - cpu、io设备 ←利用率高
                        - 吞吐量big.
            - process↑，←竞争激烈，not cpu利用率high
                - 过↑，*死锁*
        - 分
            - 交互 时间片 多user
            - goal：快速响应
        - 实
            - 不超：规定t
---
**2计算**：
>draw pic：横t/s 纵process or program AB
- cpu利用率
    - $u=\frac{t_{process中调用cpu}}{t_{运行总时}}$
    - 2process
        - 多 ← 1个用完另1用
            - judge process whether等待？_（开头wait_ 也算）
        - 单
---
---
## 运行环境
- os 
    - 轮转时间片调度← no need to pre-order
    - have to 提供__功能
        - ==中断==
            - "访管" instruction
            - user态→核心..  ← 系统调用++接口++
                - > 传参→trap→service程序，return
                - 陷入(trap)中断
                    - after that： 进入中断处理' 程序 belongs to：OS..
                - whole转换 _(→内核)_ 由__完成
                    - **硬件**
            - --
            - 引起中断：
                - 整数除以0(belongs to异常
                    - 异常：cpu内部发生
                - 缺页异常
           ---
             - data**保存**：
                - 断点（PC，PSW） ← 中断隐指令auto
                - 通用R ← OS
                    - OS内核：中断service、..向量表、..屏蔽字
                        - 中断向量表：ds：数组
                            - type号+中断处理program入口地址
                            - be created in **OS初始化**（before自检）
                - TLB cache← 硬件
             


- 内核/核心态
    - 特权指令
        - IO指令
            - ↑through IO通道（special处理器）
            - include文件IO etc
        - visit程序状态
        - 存取special R
    - 3key
        - clock,中断,原语
    - R清"0"
    - --
    - system调用 **执行** / **被调用过程**
        - 保存PSW PC值 ← 一般.. only PC
            - ↑中断                ↑子程序调用
        - different 系统，调用接口different
    - run **all** Instruction except "访管"
    - can't 进程切换
    ---
- 用户态
    - can执行
        - change 内存单元’值
        - 命令解释
        - "访管"
        - 
        - system调用++命令++
    - 库function
        - 函数调用
    - only 非特
---
- 用到 系统调用’situation
    - 中断
    - 资源访问、PT创建执行终止、system信息
---
---
### 结构

- structure
    - 分层式
        - 便于调试
            - 单项依赖
                - 不灵活，穿过多层add开销
            - 不influence other层
        - 最显著drawback
            - 设计困难_（复杂）_
    - 模块化
        - all in 内核
            - 内核外不影响；内..影响..
        - **微**/宏内核
            - 微
                - 4feature：
                    - core小
                    - c/s模式
                    - 机制 策略，分离
                    - 面向对象
                - 系统调用related操作等, in微内核
                    - (include中断 trap、进程etc
                - 适用于 分布式系统环境
                - --
                - often 用户态←→核心.. ←开销大，**No**高效
                    - divide核心and other服务
                        - ↑通信
                        - 内核中 服务越少越稳定
            - --
            - windows use两者
---
## 引导

- 引导program 2types：
    - 引导扇区：启动管理器 （引导OS
        - store in 硬盘
    - 自举程序（BIOS组成部分
        - 启动具体设备
        - store in Rom

- 硬件自检前
    - cpu加电→ JMP指令to BIOS
    - →登记..中断程序入口地址
    
- OS最终被加载到
    - RAM
---

- only内核常驻 内存
    - others需要时才调用

---
### virtual
- VMM
    - code量 ＜ 完整os..
---

<br>

<br>

---
# detail
## 进程 线程

- 进程
    - PCB data 程序
        - PCB
            - used by os to管理 并发执行'进程
            - 包括
                - process标志、控制、资源信息，<span style="color:lightgray">cpu现场</span>
        - process vs 程序 
            - 根本区别
                - 动，静
            - same程序 run on不同数据集
                - → **不同**进程
            - --
        - 实体与**c**语言对应
            - PCB ——process优先级
            - 正文段——全局赋值变量，常量值(19,"string"
                - processes不能utilize全局变量 exchange 数据(无联系
            - 堆..—— 未赋值'局部变量，function调用实参传递值
            - 栈..—— malloc()动态分配存储区
    
    - process最大数目 limited by
        - 内存size
        ---
    - features
        - 并发
            - 不可再现性
            - 相对v
                - 与__有关
                    - 调度策略
            - ++lose++程序++封闭性++
                - 封闭性：
                    - 结果only up to 进程itself
                        - ↑lose的reason
                            - ==资源==共享、might存在互斥
                            - thus，结果与 速度 有关
                        - <span style="color:lightgray">非并发' still have 封闭性</span>
     ---                      
     
    ---
    - 原语
        - >不可中断'指令序列
        - 进程控制
            - no 分配CPU
                - ↑系统调用realize
                - --
            - process创建原语
                - 过程：
                    - 会导致create 新进程’operation
                        - user： login；open.abrowser程序
                        - os: react to用户请求
                    - 高级调度
            - ..就绪
            - ..阻塞
            -  ..终止..
        - communication
            - 信箱
                - >间接
                - 发送原语
                - 接收..
            - 共享内存
                - fastest 通信way
                    - allow 多个进程 直接visit same物理内存        
            - 管道
                - 单向
                - need 拷贝 data of 内核&user space
            - 消息传递
                - need 拷贝..
                - 格式化&排队 message
                - --
            - socket
                - different机器间'process
                    - 经过 协议栈(传输层以下
                        - <span style="color:lightgray">might related to数据加密、压缩</span>
    -  have 独立地址space
        - 各自私有
            - thus进程间交换数据：
                - 共享file、存储区，消息传递
    - ==状态==
        - 创建
        - 就绪
            - 申请不被satisfy← changed to..
                - ？？why 不是阻塞
            - can由2type态转入
                - 阻塞，运行
                    - 运行→就绪'reason
                        - 时间片到 (wait for next片
                        - appear更高优先级process
        - --
        - **运行**
            - >有且仅1 process working
            - get处理器运行 through 
                - 调度
                    - 优先级
                        - 动态..
                            - according to情况，动态adjust
                        - 静..
            - equipment：
                -  单处理器
                    - process
                        - 10个process
                            - 最多9就绪，1运行
                        - might all process死锁，no进程in运行态 
                    - 与I/O设备并行
                - 打印机
                    - 独占operation
                - --
            - can由2type态转入
                - 阻塞，运行
        - --
        - 阻塞
            - process_i请求
                - 所请求操作(在当前work’p_other)完成后，该process_i：
                    - 阻塞→就绪
            - only__转换 由process自身决定
                - 运行→阻塞
        - 终止
<br>
    ---

- **线程**
    - >for减少时空开销
        - improve程序 并发执行程度，<span style="color:lightgray">improve效率</span>
            - any进程'T 均可 并发excecute
                - (同一or不同
    - include CPU现场
        - (PC PSW 通用R ，stack指针
            - 无独立地址space，共享belonged进程'space
                - ++通信++也share此space
                    - no调用
        - CPU调度基本单位
            - can 独立excecute程序
    - 线程'切换
        - might引起进程切换
            - p_1中的T_1切换为p_2的T_2
                - same进程中的T切换，不会..
    - --
    - 多T model
        - eg.多个线程,其中一个阻塞
            - 多对一(多ult映射到1klt
                - 一个influence whole 
                    - 进程阻塞
            - 一..一
                - 一一映射，不影响other klt
                    - ..不..
        - 应用eg
            - ..
                - web sever响应http请求
            - no need
                -  v较慢
                    - eg.人键盘输入
    - --
    - 线程优缺点
        - good
            - 便于通信，save资源；improve并发
        - drawback
            - 不安全
                - might一个错 influence whole
### P T
### cpu调度
### 同步、互斥
### 死锁deadly embrace

---
---
## 内存
## 文件
## IO
        
