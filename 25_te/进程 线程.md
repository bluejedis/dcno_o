## 进程 线程
### P T
- ==进程==
    - >资源分配 基本单位
    - PCB data 程序
        - PCB
            - used by os to管理 并发执行'进程
            - 包括
                - process标志、控制、资源信息，<span style="color:lightgray">cpu现场</span>
        - process vs 程序 
            - 根本区别
                - 动，静
            - same程序 run on不同数据集
                - → **不同**进程
            - --
        - 实体与**c**语言对应
            - PCB ——process优先级
            - 正文段——全局赋值变量，常量值(19,"string"
                - processes不能utilize全局变量 exchange 数据(无联系
                    - eg.协作/合作process间
                        - samely，数据库也no
            - 堆..—— 未赋值'局部变量，function调用实参传递值
            - 栈..—— malloc()动态分配存储区
    
    - process最大数目 limited by
        - 内存size
        ---
    - features
        - 并发
            - 不可再现性
            - 相对v
                - 与__有关
                    - 调度策略
            - ++lose++程序++封闭性++
                - 封闭性：
                    - 结果only up to 进程itself
                        - ↑lose的reason
                            - ==资源==共享、might存在互斥
                            - thus，结果与 速度 有关
                        - <span style="color:lightgray">非并发' still have 封闭性</span>
     ---                      
     
    ---
    - 原语
        - >不可中断'指令序列
        - 进程控制
            - no 分配CPU
                - ↑系统调用realize
                - --
            - process创建原语
                - 
                - 过程：
                    - step：
                        - 申请PCB
                        - 分配资源
                            - no cpu←调度work
                        - PCB初始化&insert to就绪队列
                        - return p标志号
                    - 会导致create 新进程’operation
                        - user： login；open.abrowser程序
                        - os: react to用户请求；启动程序执行
                            - <span style="color:lightgray"> no设备分配</span>
                    - 高级调度
            - ..就绪
            - ..阻塞
            -  ..终止..
        - **communication**
            - 信箱
                - >间接
                - 发送原语
                - 接收..
            - 共享内存
                - fastest 通信way
                    - allow 多个进程 直接visit same物理内存        
            - 管道Pipe
                - 单向
                    - size:a page of内存
                    - r w操作
                        - 一次一个p
                        - 均might堵塞
                - need 拷贝 data of 内核&user space
            - 消息传递
                - need 拷贝..
                - 格式化&排队 message
                - --
            - socket
                - different机器间'process
                    - 经过 协议栈(传输层以下
                        - <span style="color:lightgray">might related to数据加密、压缩</span>
    -  have 独立地址space
        - 各自私有
            - thus进程间交换数据：
                - 共享file、存储区，消息传递
    - ==状态==
        - 创建
        - 就绪
            - 申请不被satisfy← changed to..
                - ？？why 不是阻塞
            - can由2type态转入
                - 阻塞，运行
                    - 运行→就绪
                        - reason
                            - 时间片到 (wait for next片
                            - appear更高优先级process
                        - occur进程切换
                            - cpu调度different进程excecute
                                - (运行→就绪means 调度another p执行
            - p被唤醒
                - means 重新竞争cpu
                    - 就绪队列 
                        - 按FIFO等principle排序
                    - 优先级按fix算法计算
                        - 可能增大
                    - 就绪态can't work
        - --
        - **运行**
            - >有且仅1 process working
            - get处理器运行 through 
                - 调度
                    - 优先级
                        - 动态..
                            - according to情况，动态adjust
                        - 静..
            - equipment：
                -  单处理器
                    - process
                        - 10个process
                            - 最多9就绪，1运行
                        - might all process死锁，no进程in运行态 
                    - 与I/O设备并行
                - 打印机
                    - 独占operation
                - --
            - can由2type态转入
                - 阻塞，运行
        - --
        - **阻塞**
            - >certain事件/资源 不满足而 wait
                - usually
                    - IO操作
                        - eg.keyboard
                        - r data from 磁盘
                    - 互斥or同步 data
                        - eg.wait信号or 等待进入 互斥临界区代码段
                - 资源
                    - not include 
                        - CPU
            - process_i请求
                - 所请求操作(在当前work’p_other)完成后，该process_i：
                    - 阻塞→就绪
            - only__转换 由process自身决定
                - 运行→阻塞
                    - ↑ <span style="color:lightgray">自己会变阻塞</span> need →就绪
        - 终止
<br>
    ---

- **线程**
    - >for减少时空开销
        - improve程序 并发执行程度，<span style="color:lightgray">improve效率</span>
            - any进程'T 均可 并发excecute
                - (同一or不同
    - include CPU现场
        - (PC PSW 通用R ，stack指针
            - 无独立地址space，共享belonged进程'space
                - ++通信++也share此space
                    - no调用
        - CPU调度基本单位
            - can 独立excecute程序
    - 线程'切换
        - might引起进程切换
            - p_1中的T_1切换为p_2的T_2
                - same进程中的T切换，不会..
    - --
    - ULT KLT
        - ULT
            - 调度单位：P
                - 同一p中
                    - 含1 or 100 ult，时间same
                - 跨进程，才need内核
                    - others 全in用户态
            - created by
                - user程序 or数据库
                    - in 任意操作系统 can work
        - KLT
            - 调度单位：T
                - 进程A:1 klt；..B: 100..
                    - B进程时间is 100A
            - 执行：
                - 同一p中，线程切换，开销更大
                    -  need用户→内核 切换
                        - <span style="color:lightgray">program实体 can在内核态运行</span>

    ---
    - 多T model
        - eg.多个线程,其中一个阻塞
            - 多对一(多ult映射到1klt
                - 一个influence whole 
                    - 进程阻塞
            - 一..一
                - 一一映射，不影响other klt
                    - ..不..
        - 3type
            - 多v1
                - ult由进程管理
            - 并发性better：
                - 1v1 多v多 ← 充分utilize klt
        -  应用eg
            - ..
                - web sever响应http请求
            - no need
                -  v较慢
                    - eg.人键盘输入
    - --
    - 线程优缺点
        - good
            - 便于通信，save资源；improve并发
        - drawback
            - 不安全
                - might一个错 influence whole

### cpu调度
### 同步、互斥
### 死锁deadly embrace
