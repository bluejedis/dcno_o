## 概述
- 设备
    - base
        - 绝对号
            - system对设备 同一编号
    - 分类
        - info
            - 块
                - >可寻址
                - I/O控制方式
                    - DMA
                        - ↑磁盘
 
            - 字符
                - >不可..
        - 共享
            - 独占设备
                - >静态分配
                - 例：printer
                    - eg.打印文件
                        - ↑实现：文件系统+设备管理程序
            - **共享**..
                - >动态..
                - >可寻址+随机存取
                - **一段time** 多p同时visit
                    - ↑not 同一时刻
                - 分配
                    - 不会死锁
                        - discern：
                            - 独占equipment 分配会
                    - --
                    - 考虑
                        - 安全性、独立性、固有属性
                    - - 
                    - 例：磁盘
                        - discern：
                            - 磁带机
                                - ↑多p visit, 无法读写
                                - link：
                                    - 多道程序visit
                                        - ↑提高 单机资源利用率
            - --
            - **虚拟**..
                - 1物理equipment →多逻辑..
                    - user p实际分到外存区(虚拟设备)
                - >based on Spooling技术
                    -  >↑提高独占设备'利用率
                        - ↑独占→共享
                    - consist of 
                        -  **井**
                            - >模拟I/O
                                - 暂存至磁盘固定区域
                                - ↑以空间 换时间
                                    - ↑由系统实现
                            - 输入井
                            - 输出..
                        - I/O**缓冲区**
                            - >内存空间
                            - >managed by缓输出程序
                        -I/O**进程**
                            - >..预输入程序
                        -  no
                            - 外围计算机
                                - ↑is利用 外围控制机
    - I/O接口
        - 3R
            - 数据..
            ---
            -  状态..
                - >store 设备状态信号
            - 控制..
                - >接收上层 **命令**
                - link：
                    - 设备控制器
                        - 上层编制
                            - 状态+控制R, 控制命令
                        - I/O逻辑
                            - realize对设备'control
                        - 设备映射表(DMT
                            - >逻辑←→物理 对应关系
- I/O控制方式
    - type
        - 直接
            - 不会阻塞
                - ↑完成用户进程的 I/O request后才结束
                - discern：
                    - might阻塞：
                        - >当前p阻塞
                        - 中断
                            - ↑..
                                - cpu与设备并行
                        - DMA
                            - ↑cpu转other进程执行
                                - 与DMA数据传输 两者并行
        - **中断**
            - process
                - 硬件
                    - cpu模式转换
                    - 保存断点
                    - 源识别
                        - ↑硬件识别法
                - 纯软：
                    - 中断服务程序
                        - <span style="color:lightgray">↑中断处理程序 的某次操作</span>
                        - >数据的输入和输出
                - --
                - **中断处理程序**
                    - type
                        - 屏蔽中断
                        - 中断嵌套
                            - ↑∴ 不一定返回原p
                    - typically application
                        - 键盘输入
            - count
                - 开销
                    - 按描述list式
        ---
        -  **DMA**
            - >控制器
                - 相关R
                    - 命令/状态
                    - 内存地址
                    - 数据
                        - ↑no 堆栈指针
            - >I/O设备&主存 ←直接数据通道
                - ↑不过cpu
                    - ↑I/O过程由 DMA控制器负责
            - process
                - 预处理
                - 数据传送
                - 后处理
                    - DMA 控制器 "中断请求"
                    - “DMA结束”中断服务程序

        - --
        - 通道
            - >硬件技术
                - discern：
                    - 软件实现 based on内存
                        - spooling、缓冲池、内存覆盖
            - 与 设备控制器
                - 通道control..控制器
                    - 控制器control设备
                        - ↑cpu要么send命令to通道
                            - 要么to控制器
    - --
    - 不同I/O控制ways
        - need 不同设备驱动程序
- --
- I/O软件 层次结构
    - order
        - 用户
        - **设备独立性软件**
            - >向上层提供**系统调用**的接口
            [detail 见下](#section1)
        - **设备驱动程序**
            - >抽象I/O→具体要求→ 设备控制器
                - <span style="color:lightgray">↑向设备R写入命令，以控制设备的工作状态、数据传输方式</span>
                - process
                    - 抽象→具体
                    - 服务请求校验→检查设备状态
                    - send参数→start
            - --
            - >与设备相关的**中断**处理过程？(对吗left
                - 磁盘调度
                    - 语言 有汇编有高级
            - 几种类型，几个设备驱动程序
                - 管理I/O设备
                    -  执行 I/O命令等
                        - ↑数据的分析 与 缓冲 由p和os负责
                - 设备R写命令
                - 计算 磁盘的
                    - 柱面号、磁头号、扇区号
                        - --
                    - discern：
                        - I/O软件
                            - type
                                - 设备无关的操作系统软件
                                    - >即 设备独立性软件
                                - 驱动
                - --
            - 接口
                - 不同os对应不同接口
        - 中断处理程序
- 应用程序I/O接口
    - type
        - 阻塞
        - 非..


---
<a id="section1"></a>
## 设备独立性软件
- 设备独立性软件
    - >物理设备--映射→ 逻辑设备
        - ↑∴使用与实际无关
            - link：spooling
    - related work
        - 设备使用权
        - 缓冲区管理
    - --
- 高速缓存 **缓冲区**
    - base
        - 存储区域
            - 硬件R or 内存 实现
        - goal
            - 改善 cpu与I/O设备 速度不匹配
                - ↑if I/O时间本身就远短于cpu
                    - ↑缓冲池没有设置必要
            - =减少I/O次数
        - 着重考虑
            - p visit 缓冲区同步
    - --
    - type
        - 单缓冲区
            - count
                - 数据处理所用时间
                    - 串行
                        - 缓冲区→user区
                    - can并
                        - data→缓冲
                        - cpu处理data
                            - - -
                        -  discern：
                            - 双缓冲
                                - 三者皆可并行
                                    - 流水线 need 加剩下的即可
        - 双..
            - >双向传送
                - ↑同一时刻
                - discern:
                    - 单向
                        - only 一段时间 双向
                            - ↑同一时刻 单向
        - 循环..
            - --
        - 缓冲池
            - >system共用资源
                - 支持多p
            - location：
                - 主存
        - --
    - application
        - 鼠标
            - ↑更高优先级出现，缓冲区record活动
- - -
- equipment分配 与 回收
    - structure
    - 分配
        - 算法
            - FCFS
            - 最高优先级优先
        - 方式
            - >同分类
                - [见上](#section2)
            - 独
                - printer
            - 共
                - >一段时间间隔内，被多个p同时visit
            - 虚拟
        - 程序
            - >与 通道控制way相反
                - 设备→控制器→通道
        - --
        - 考虑
            - 类型
            - limit
            - 占用
            - mapping关系
- --
- SPOOLing技术
- 设备驱动程序 接口

## 磁盘、固态硬盘
- 磁盘
    - concept
    - 管理
    - 调度算法
- 固态硬盘
- --
- todo： OS中整个的分配 与 调度算法，哪些专用 哪些通？
    - 静态，动态？                - <span style="color:lightgray">↑向设备R写入命令，以控制设备的工作状态、数据传输方式</span>
            - 几种类型，几个设备驱动程序
                - 执行I/O命令
                        - --
                    - discern：
                        - I/O软件
                            - type
                                - 设备无关的操作系统软件
                                    - >即 设备独立性软件
                                - 驱动
        - 中断处理程序
- 应用程序I/O接口
    - type
        - 阻塞
        - 非..


---
## 设备独立性软件
- 设备独立性软件
- 高速缓存 缓冲区
- equipment分配 与 回收
    - structure
- --
- SPOOLing技术
- equipment驱动程序 接口

## 磁盘、固态硬盘
- 磁盘
    - concept
    - 管理
    - 调度算法
- 固态硬盘
